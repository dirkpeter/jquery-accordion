"use strict";!function(e){var t="plugin_accordion",n=function(t,n){var r=this;r.element=t,r.attributes=["current","trigger","content"],r.defaults={debug:!1,debugCollapsibles:!1,content:".content",trigger:".trigger",classPrefix:"accordion-",contentClass:"content",elementsClass:"element",triggerClass:"trigger",elements:e(),eventSuffix:".accordion-plugin",multiple:!1,toggleListener:!0,animated:!0,calcDelta:function(){return 0},current:0},r.current=0,r.elementCount=void 0,r.$element=void 0,r.$elements=void 0,r._init(n)};n.prototype={_toggleLogging:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.settings.debug)if(e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.group(["accordion",t].join(" "),r)}else console.groupEnd()},_log:function(e){if(!0===this.settings.debug){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.length?console.log(e,n):console.log(e)}},_setCurrent:function(e,t,n){this._log("_setCurrent",e,t,n);var r=this,i=r.settings,o=i.elementsCache;return!(parseInt(e,10)<0||!n&&r.current===e)&&((t||"boolean"!=typeof t)&&o[e].toggle(!0,!0),!0!==i.multiple&&o.forEach(function(t,n){n!==e&&t.toggle(!1,!0)}),r.current=e,r.$element.trigger("change",[r.current]),e)},_setCollapsibleListener:function(){this._log("_setCollapsibleListener");var t=this;t.$elements.on("toggle"+t.settings.eventSuffix,function(n,r){t._toggleLogging(!0,"<element-toggle>",n,r),r&&t.goto(e(n.currentTarget).index(),!0,!1),t._toggleLogging()})},_cacheElementsById:function(){this._log("_cacheElementsById");var t=this,n=[];t.$elements.each(function(t,r){n.push(e(r).data("plugin_collapsible"))}),t.settings.elementsCache=n},_create:function(){this._log("_create");var e=this,t=e.settings;e.$elements.collapsible({trigger:t.trigger,content:t.content,calcDelta:t.calcDelta,open:!1,debug:t.debugCollapsibles,animated:t.animated}),e._cacheElementsById(),e.elementCount=t.elementsCache.length,t.toggleListener&&e._setCollapsibleListener()},goto:function(e,t){this._log("goto",e,t);var n=this,r=e;return t||(r=parseInt(e,10)-1),r<0||r>=n.elementCount?(n._log("index exceeds range ("+r+"/"+n.elementCount+")"),!1):(n._setCurrent(r,!0,!0),r)},update:function(){this._log("update");var e=this,t=e.settings;return e.goto(t.current,!0),e.$element.trigger("update",[t.current]),t.current},_importAttrConfig:function(){this._log("_importAttrConfig");var e=this,t=e.settings,n=e.$element.data("options");if(!n)return!1;var r=!0,i=!1,o=void 0;try{for(var g,l=e.attributes[Symbol.iterator]();!(r=(g=l.next()).done);r=!0){var s=g.value;n.hasOwnProperty(s)&&(t[s]=n[s])}}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return e.settings},_init:function(t){var n=this;n.$element=e(n.element),n.settings=e.extend(n.defaults,t),n._toggleLogging(!0),n._log("_init",t),n._importAttrConfig(),n.$elements=n.$element.find(n.settings.elements),n._create(),n.update(),n.$element.trigger("init",[n.settings.current]),n._toggleLogging()},getCurrent:function(){return this._log("getCurrent"),this.settings.current}},e.fn.accordion=function(r,i){return this.each(function(){var o=this;e.data(o,t)?n.prototype[r]&&"string"==typeof r&&"_"!==r.substr(0,1)&&e.data(o,t)[r](i):e.data(o,t,new n(o,r))})}}(jQuery);